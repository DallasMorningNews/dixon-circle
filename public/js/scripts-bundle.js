$(document).ready(function(){function e(e){c.addSource("locations",{type:"geojson",data:e}),c.addLayer({id:"dixonCircle",source:"locations",type:"circle",paint:{"circle-radius":{stops:[[1,10],[8,10],[16,9]]},"circle-color":"#FBD44B","circle-opacity":1}}),c.on("click",function(e){var a=c.queryRenderedFeatures(e.point,{layers:["dixonCircle"]});if(a.length){var t=a[0];d.remove(),d=new mapboxgl.Popup,d.setLngLat(t.geometry.coordinates).setHTML("<h5 class='mapHead'>"+t.properties.head+"</h5>").addTo(c),o(a[0].geometry.coordinates,17,750,0)}}),c.on("mousemove",function(e){var o=c.queryRenderedFeatures(e.point,{layers:["dixonCircle"]});c.getCanvas().style.cursor=o.length?"pointer":""})}function o(e,o,a,t){c.easeTo({center:e,zoom:o,duration:a,pitch:t})}function a(){m=[];var e=$(window).scrollTop(),a=$(window).height(),t=a+e;$.each($(".dixonMap"),function(){t>$(this).offset().top+350&&m.push($(this).attr("id"))});var n=m.length;m[n-1]!==p&&void 0!==m[n-1]?(o(l.features[n-1].geometry.coordinates,17,750,0),d.setLngLat(l.features[n-1].geometry.coordinates).setHTML("<h5 class='mapHead'>"+l.features[n-1].properties.head+"</h5>").addTo(c),p=m[n-1]):void 0===m[n-1]&&(o(r,15,750,0),d.remove(),d=new mapboxgl.Popup,p=""),t>$("#dixon8").offset().top+350&&(o(r,15,750,0),d.remove(),d=new mapboxgl.Popup)}function t(){$("#map").hasClass("viewable")===!0?($("#map").removeClass("viewable"),$("#mapExpander").removeClass("fa-times").addClass("fa-map-marker")):($("#map").addClass("viewable"),$("#mapExpander").removeClass("fa-map-marker").addClass("fa-times"))}function n(e,o){var a=$("#"+e);console.log(a),a.find("ul").children("li").eq(o).addClass("activeItem").siblings("li").removeClass("activeItem"),a.find(".dixonStory").addClass("noShow").eq(o).removeClass("noShow");var t=a.find(".dixonStory").eq(o);t.offset().top<=$(window).scrollTop()&&$("html, body").animate({scrollTop:t.offset().top-80+"px"},250)}var i=new Date,s=i.getFullYear();$(".copyright").text(s);var r=[-96.7371063,32.7628376],l=[{number:"1",head:"Dixon Circle",lng:-96.73251,lat:32.76531},{number:"2",head:"The Corner",lng:-96.7353,lat:32.76378},{number:"3",head:"The Killing",lng:-96.73416,lat:32.76324},{number:"4",head:"The People",lng:-96.73377,lat:32.76508},{number:"5",head:"The Police",lng:-96.7348,lat:32.76468},{number:"6",head:"The Kid Who Got Out",lng:-96.73862,lat:32.76178},{number:"7",head:"Freddieâ€™s Last Bust",lng:-96.73461,lat:32.76523}];l=GeoJSON.parse(l,{Point:["lat","lng"],include:["number","head"]});var d=new mapboxgl.Popup;mapboxgl.accessToken="pk.eyJ1IjoibWFjbWFuIiwiYSI6ImVEbmNmZjAifQ.zVzy9cyjNT1tMYOTex51HQ";var c=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/satellite-streets-v9",center:r,zoom:15});c.on("load",function(){c.scrollZoom.disable(),c.addControl(new mapboxgl.Navigation),e(l)}),$("#mapReset").on("click",function(){o(r,15,750,0),d.remove(),d=new mapboxgl.Popup,p=""});var p,m=[];$(window).on("scroll",_.throttle(a,600)),$(window).scroll(function(){var e=$(window).scrollTop();e>52?($("#mapReset").addClass("moved"),$(".mapboxgl-ctrl-top-right").addClass("moved"),$("#mapExpander").addClass("moved")):($("#mapReset").removeClass("moved"),$(".mapboxgl-ctrl-top-right").removeClass("moved"),$("#mapExpander").removeClass("moved"));$(".dixonContent");$.each($(".dixonContent"),function(){$(this).offset().top+60<e&&$(this).offset().top+$(this).height()>e+50?$(this).find($("ul")).addClass("stuck"):$(this).find($("ul")).removeClass("stuck")})}),$("#mapExpander").click(function(){t()}),$(".mapper").click(function(){t()});var u=$(".dixonStories ul li");u.click(function(){var e=$(this).index(),o=$(this).closest(".dixonSection").attr("id");n(o,e)}),$(".next").click(function(){var e=$(this).closest(".dixonSection").attr("id"),o=$(this).parent(".dixonStory").index();n(e,o)})});
//# sourceMappingURL=scripts-bundle.js.map
